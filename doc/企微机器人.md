消息推送配置说明

最后更新：2025/08/07

目录

- [如何使用消息推送](https://developer.work.weixin.qq.com/document/path/99110#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81)
- [消息类型及数据格式](https://developer.work.weixin.qq.com/document/path/99110#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F)
-       [文本类型](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E6%9C%AC%E7%B1%BB%E5%9E%8B)
-       [markdown类型](https://developer.work.weixin.qq.com/document/path/99110#markdown%E7%B1%BB%E5%9E%8B)
-       [markdown\_v2类型](https://developer.work.weixin.qq.com/document/path/99110#markdown-v2%E7%B1%BB%E5%9E%8B)
-       [图片类型](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E7%89%87%E7%B1%BB%E5%9E%8B)
-       [图文类型](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E6%96%87%E7%B1%BB%E5%9E%8B)
-       [文件类型](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B)
-       [语音类型](https://developer.work.weixin.qq.com/document/path/99110#%E8%AF%AD%E9%9F%B3%E7%B1%BB%E5%9E%8B)
-       [模版卡片类型](https://developer.work.weixin.qq.com/document/path/99110#%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87%E7%B1%BB%E5%9E%8B)
-             [文本通知模版卡片](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E6%9C%AC%E9%80%9A%E7%9F%A5%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87)
-             [图文展示模版卡片](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E6%96%87%E5%B1%95%E7%A4%BA%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87)
- [消息发送频率限制](https://developer.work.weixin.qq.com/document/path/99110#%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6)
- [文件上传接口](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)

## [](https://developer.work.weixin.qq.com/document/path/99110#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81)如何使用消息推送

- 创建者可以在 创建消息推送页面、创建完成页面、消息推送详情页面，看到该消息推送特有的webhookurl。开发者可以按以下说明向这个地址发起HTTP POST 请求，即可实现给该群组发送消息。下面举个简单的例子.  
    假设webhook是：https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa

> 特别特别要注意：一定要**保护好消息推送的webhook地址**，避免泄漏！不要分享到github、博客等可被公开查阅的地方，否则坏人就可以用你的消息推送来发垃圾消息了。

以下是用curl工具往群组推送文本消息的示例（注意要将url替换成你的消息推送webhook地址，content必须是utf8编码）：

```javascript
curl 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=693axxx6-7aoc-4bc4-97a0-0ec2sifa5aaa' \
   -H 'Content-Type: application/json' \
   -d '
   {
    	"msgtype": "text",
    	"text": {
        	"content": "hello world"
    	}
   }'
```

- 当前自定义消息推送支持文本（text）、markdown（markdown、markdown\_v2）、图片（image）、图文（news）、文件（file）、语音（voice）、模板卡片（template\_card）八种消息类型。
- 消息推送的text/markdown类型消息支持在content中使用<@userid>扩展语法来@群成员（markdown\_v2类型消息不支持该扩展语法）

## [](https://developer.work.weixin.qq.com/document/path/99110#%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F)消息类型及数据格式

### [](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E6%9C%AC%E7%B1%BB%E5%9E%8B)文本类型

```javascript
{
    "msgtype": "text",
    "text": {
        "content": "广州今日天气：29度，大部分多云，降雨概率：60%",
		"mentioned_list":["wangqing","@all"],
		"mentioned_mobile_list":["13800001111","@all"]
    }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为text |
| content | 是 | 文本内容，最长不超过4096个字节，必须是utf8编码 |
| mentioned\_list | 否 | userid的列表，提醒群中的指定成员(@某个成员)，@all表示提醒所有人，如果开发者获取不到userid，可以使用mentioned\_mobile\_list |
| mentioned\_mobile\_list | 否 | 手机号列表，提醒手机号对应的群成员(@某个成员)，@all表示提醒所有人 |

![](https://wework.qpic.cn/wwpic3az/155410_mgY2__q0TJ-k2s4_1754398034/0)

### [](https://developer.work.weixin.qq.com/document/path/99110#markdown%E7%B1%BB%E5%9E%8B)markdown类型

```json
{
    "msgtype": "markdown",
    "markdown": {
        "content": "实时新增用户反馈<font color=\"warning\">132例</font>，请相关同事注意。\n>类型:<font color=\"comment\">用户反馈</font>\n>普通用户反馈:<font color=\"comment\">117例</font>\n>VIP用户反馈:<font color=\"comment\">15例</font>"
    }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为markdown |
| content | 是 | markdown内容，最长不超过4096个字节，必须是utf8编码 |

![](https://wework.qpic.cn/wwpic3az/92917_Us9fVK4YTiaJGNB_1754398146/0)

目前支持的markdown语法是如下的子集：

1. 标题 （支持1至6级标题，注意#与文字中间要有空格）  
    
    ```javascript
    # 标题一
    ## 标题二
    ### 标题三
    #### 标题四
    ##### 标题五
    ###### 标题六
    ```
    
2. 加粗  
    
    ```javascript
    **bold**
    ```
    
3. 链接  
    
    ```javascript
    [这是一个链接](https://work.weixin.qq.com/api/doc)
    ```
    
4. 行内代码段（暂不支持跨行）  
    
    ```javascript
    `code`
    ```
    
5. 引用  
    
    ```javascript
    > 引用文字
    ```
    
6. 字体颜色(只支持3种内置颜色)  
    
    ```javascript
    <font color="info">绿色</font>
    <font color="comment">灰色</font>
    <font color="warning">橙红色</font>
    ```
    

### [](https://developer.work.weixin.qq.com/document/path/99110#markdown-v2%E7%B1%BB%E5%9E%8B)markdown\_v2类型

```json
{
	"msgtype": "markdown_v2",
	"markdown_v2": {
         "content": "# 一、标题\n## 二级标题\n### 三级标题\n# 二、字体\n*斜体*\n\n**加粗**\n# 三、列表 \n- 无序列表 1 \n- 无序列表 2\n  - 无序列表 2.1\n  - 无序列表 2.2\n1. 有序列表 1\n2. 有序列表 2\n# 四、引用\n> 一级引用\n>>二级引用\n>>>三级引用\n# 五、链接\n[这是一个链接](https:work.weixin.qq.com\/api\/doc)\n![](https://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png)\n# 六、分割线\n\n---\n# 七、代码\n`这是行内代码`\n```\n这是独立代码块\n```\n\n# 八、表格\n| 姓名 | 文化衫尺寸 | 收货地址 |\n| :----- | :----: | -------: |\n| 张三 | S | 广州 |\n| 李四 | L | 深圳 |\n"
	   }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为markdown\_v2。 |
| content | 是 | markdown\_v2内容，最长不超过4096个字节，必须是utf8编码。  
特殊的，  
1\. markdown\_v2**不支持字体颜色、@群成员**的语法， 具体支持的语法可参考下面说明  
2\. 消息内容在**客户端 4.1.36 版本以下(安卓端为4.1.38以下)** 消息表现为**纯文本**，建议使用最新客户端版本体验 |

![](https://wework.qpic.cn/wwpic3az/716751_Kk1npuyjShGnHv2_1754409187/0)

![](https://wework.qpic.cn/wwpic3az/420362_UAFblcRdQLWtiSZ_1749029414/0)

目前支持的markdown\_v2语法是如下的子集：

1. 标题 （支持1至6级标题，注意#与文字中间要有空格）  
    
    ```javascript
    # 标题一
    ## 标题二
    ### 标题三
    #### 标题四
    ##### 标题五
    ###### 标题六
    ```
    
2. 字体  
    
    ```javascript
    *斜体*
    **加粗**
    ```
    
3. 列表  
    
    ```javascript
    - 无序列表 1
    - 无序列表 2
     - 无序列表 2.1
     - 无序列表 2.2
    1. 有序列表 1
    2. 有序列表 2
    ```
    
4. 引用  
    
    ```javascript
    >一级引用
    >>二级引用
    >>>三级引用
    ```
    
5. 链接  
    
    ```javascript
    [这是一个链接](https://work.weixin.qq.com/api/doc)
    ![这是一个图片](https://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png)
    ```
    
6. 分割线  
    
    ```javascript
    
    ---
    ```
    
7. 代码  
    
    ```javascript
    `这是行内代码````这是独立代码块```
    ```
    
      
    
8. 表格  
    
    ```javascript
    | 姓名 | 文化衫尺寸 | 收货地址 |
    | :----- | :----: | -------: |
    | 张三 | S | 广州 |
    | 李四 | L | 深圳 |
    ```
    

### [](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E7%89%87%E7%B1%BB%E5%9E%8B)图片类型

```javascript
{
    "msgtype": "image",
    "image": {
        "base64": "DATA",
		"md5": "MD5"
    }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为image |
| base64 | 是 | 图片内容的base64编码 |
| md5 | 是 | 图片内容（base64编码前）的md5值 |

> 注：图片（base64编码前）最大不能超过2M，支持JPG,PNG格式

![](https://p.qpic.cn/pic_wework/2882333867/6b6d7c66fb1b8cbecf9e3a89ad87b6ef135d3c140496be31/0)

### [](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E6%96%87%E7%B1%BB%E5%9E%8B)图文类型

```javascript
{
    "msgtype": "news",
    "news": {
       "articles" : [
           {
               "title" : "中秋节礼品领取",
               "description" : "今年中秋节公司有豪礼相送",
               "url" : "www.qq.com",
               "picurl" : "https://res.mail.qq.com/node/ww/wwopenmng/images/independent/doc/test_pic_msg1.png"
           }
        ]
    }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为news |
| articles | 是 | 图文消息，一个图文消息支持1到8条图文 |
| title | 是 | 标题，不超过128个字节，超过会自动截断 |
| description | 否 | 描述，不超过512个字节，超过会自动截断 |
| url | 是 | 点击后跳转的链接。 |
| picurl | 否 | 图文消息的图片链接，支持JPG、PNG格式，较好的效果为大图 1068\*455，小图150\*150。 |

![中秋好礼.png](https://wework.qpic.cn/wwpic3az/681252_PVjlsT9TTiOq9ZB_1754409573/0)

### [](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B)文件类型

```javascript
{
    "msgtype": "file",
    "file": {
 		"media_id": "3a8asd892asd8asd"
    }
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 消息类型，此时固定为file |
| media\_id | 是 | 文件id，通过下文的文件上传接口获取 |

![文件类型.png](https://wework.qpic.cn/wwpic3az/562736_yK6vrZHUQBWgS9U_1754409888/0)

### [](https://developer.work.weixin.qq.com/document/path/99110#%E8%AF%AD%E9%9F%B3%E7%B1%BB%E5%9E%8B)语音类型

```javascript
{
	"msgtype": "voice",
	"voice": {
		"media_id": "MEDIA_ID"
	}
}
```

| 参数 | 是否必填 | 说明 |
| --- | --- | --- |
| msgtype | 是 | 语音类型，此时固定为voice |
| media\_id | 是 | 语音文件id，通过下文的文件上传接口获取 |

### [](https://developer.work.weixin.qq.com/document/path/99110#%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87%E7%B1%BB%E5%9E%8B)模版卡片类型

#### [](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E6%9C%AC%E9%80%9A%E7%9F%A5%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87)文本通知模版卡片

![](https://wework.qpic.cn/wwpic3az/240395_bLt41kl_Q_anpaz_1754410005/0)

```javascript
{
    "msgtype":"template_card",
    "template_card":{
        "card_type":"text_notice",
        "source":{
            "icon_url":"https://wework.qpic.cn/wwpic/252813_jOfDHtcISzuodLa_1629280209/0",
            "desc":"企业微信",
            "desc_color":0
        },
        "main_title":{
            "title":"欢迎使用企业微信",
            "desc":"您的好友正在邀请您加入企业微信"
        },
        "emphasis_content":{
            "title":"100",
            "desc":"数据含义"
        },
        "quote_area":{
            "type":1,
            "url":"https://work.weixin.qq.com/?from=openApi",
            "appid":"APPID",
            "pagepath":"PAGEPATH",
            "title":"引用文本标题",
            "quote_text":"Jack：企业微信真的很好用~\nBalian：超级好的一款软件！"
        },
        "sub_title_text":"下载企业微信还能抢红包！",
        "horizontal_content_list":[
            {
                "keyname":"邀请人",
                "value":"张三"
            },
            {
                "keyname":"企微官网",
                "value":"点击访问",
                "type":1,
                "url":"https://work.weixin.qq.com/?from=openApi"
            },
            {
                "keyname":"企微下载",
                "value":"企业微信.apk",
                "type":2,
                "media_id":"MEDIAID"
            }
        ],
        "jump_list":[
            {
                "type":1,
                "url":"https://work.weixin.qq.com/?from=openApi",
                "title":"企业微信官网"
            },
            {
                "type":2,
                "appid":"APPID",
                "pagepath":"PAGEPATH",
                "title":"跳转小程序"
            }
        ],
        "card_action":{
            "type":1,
            "url":"https://work.weixin.qq.com/?from=openApi",
            "appid":"APPID",
            "pagepath":"PAGEPATH"
        }
    }
}
```

请求参数

| 参数 | 类型 | 必须 | 说明 |
| :-- | :-- | :-- | :-- |
| msgtype | String | 是 | 消息类型，此时的消息类型固定为`template_card` |
| template\_card | Object | 是 | 具体的模版卡片参数 |

template\_card的参数说明

| 参数 | 类型 | 必须 | 说明 |
| :-- | :-- | :-- | :-- |
| card\_type | String | 是 | 模版卡片的模版类型，文本通知模版卡片的类型为`text_notice` |
| source | Object | 否 | 卡片来源样式信息，不需要来源样式可不填写 |
| source.icon\_url | String | 否 | 来源图片的url |
| source.desc | String | 否 | 来源图片的描述，建议不超过13个字 |
| source.desc\_color | Int | 否 | 来源文字的颜色，目前支持：0(默认) 灰色，1 黑色，2 红色，3 绿色 |
| main\_title | Object | 是 | 模版卡片的主要内容，包括一级标题和标题辅助信息 |
| main\_title.title | String | 否 | 一级标题，建议不超过26个字。**模版卡片主要内容的一级标题main\_title.title和二级普通文本sub\_title\_text必须有一项填写** |
| main\_title.desc | String | 否 | 标题辅助信息，建议不超过30个字 |
| emphasis\_content | Object | 否 | 关键数据样式 |
| emphasis\_content.title | String | 否 | 关键数据样式的数据内容，建议不超过10个字 |
| emphasis\_content.desc | String | 否 | 关键数据样式的数据描述内容，建议不超过15个字 |
| quote\_area | Object | 否 | 引用文献样式，建议不与关键数据共用 |
| quote\_area.type | Int | 否 | 引用文献样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序 |
| quote\_area.url | String | 否 | 点击跳转的url，quote\_area.type是1时必填 |
| quote\_area.appid | String | 否 | 点击跳转的小程序的appid，quote\_area.type是2时必填 |
| quote\_area.pagepath | String | 否 | 点击跳转的小程序的pagepath，quote\_area.type是2时选填 |
| quote\_area.title | String | 否 | 引用文献样式的标题 |
| quote\_area.quote\_text | String | 否 | 引用文献样式的引用文案 |
| sub\_title\_text | String | 否 | 二级普通文本，建议不超过112个字。**模版卡片主要内容的一级标题main\_title.title和二级普通文本sub\_title\_text必须有一项填写** |
| horizontal\_content\_list | Object\[\] | 否 | 二级标题+文本列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过6 |
| horizontal\_content\_list.type | Int | 否 | 模版卡片的二级标题信息内容支持的类型，1是url，2是文件附件，3 代表点击跳转成员详情 |
| horizontal\_content\_list.keyname | String | 是 | 二级标题，建议不超过5个字 |
| horizontal\_content\_list.value | String | 否 | 二级文本，如果horizontal\_content\_list.type是2，该字段代表文件名称（要包含文件类型），建议不超过26个字 |
| horizontal\_content\_list.url | String | 否 | 链接跳转的url，horizontal\_content\_list.type是1时必填 |
| horizontal\_content\_list.media\_id | String | 否 | 附件的[media\_id](https://developer.work.weixin.qq.com/document/path/99110#14404/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)，horizontal\_content\_list.type是2时必填 |
| horizontal\_content\_list.userid | String | 否 | 成员详情的userid，horizontal\_content\_list.type是3时必填 |
| jump\_list | Object\[\] | 否 | 跳转指引样式的列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过3 |
| jump\_list.type | Int | 否 | 跳转链接类型，0或不填代表不是链接，1 代表跳转url，2 代表跳转小程序 |
| jump\_list.title | String | 是 | 跳转链接样式的文案内容，建议不超过13个字 |
| jump\_list.url | String | 否 | 跳转链接的url，jump\_list.type是1时必填 |
| jump\_list.appid | String | 否 | 跳转链接的小程序的appid，jump\_list.type是2时必填 |
| jump\_list.pagepath | String | 否 | 跳转链接的小程序的pagepath，jump\_list.type是2时选填 |
| card\_action | Object | 是 | 整体卡片的点击跳转事件，text\_notice模版卡片中该字段为必填项 |
| card\_action.type | Int | 是 | 卡片跳转类型，1 代表跳转url，2 代表打开小程序。text\_notice模版卡片中该字段取值范围为\[1,2\] |
| card\_action.url | String | 否 | 跳转事件的url，card\_action.type是1时必填 |
| card\_action.appid | String | 否 | 跳转事件的小程序的appid，card\_action.type是2时必填 |
| card\_action.pagepath | String | 否 | 跳转事件的小程序的pagepath，card\_action.type是2时选填 |

#### [](https://developer.work.weixin.qq.com/document/path/99110#%E5%9B%BE%E6%96%87%E5%B1%95%E7%A4%BA%E6%A8%A1%E7%89%88%E5%8D%A1%E7%89%87)图文展示模版卡片

![](https://wework.qpic.cn/wwpic3az/102687_7Dlp3BWJRIq9K-5_1754410137/0)

```javascript
{
    "msgtype":"template_card",
    "template_card":{
        "card_type":"news_notice",
        "source":{
            "icon_url":"https://wework.qpic.cn/wwpic/252813_jOfDHtcISzuodLa_1629280209/0",
            "desc":"企业微信",
            "desc_color":0
        },
        "main_title":{
            "title":"欢迎使用企业微信",
            "desc":"您的好友正在邀请您加入企业微信"
        },
        "card_image":{
            "url":"https://wework.qpic.cn/wwpic/354393_4zpkKXd7SrGMvfg_1629280616/0",
            "aspect_ratio":2.25
        },
        "image_text_area":{
            "type":1,
            "url":"https://work.weixin.qq.com",
            "title":"欢迎使用企业微信",
            "desc":"您的好友正在邀请您加入企业微信",
            "image_url":"https://wework.qpic.cn/wwpic/354393_4zpkKXd7SrGMvfg_1629280616/0"
        },
        "quote_area":{
            "type":1,
            "url":"https://work.weixin.qq.com/?from=openApi",
            "appid":"APPID",
            "pagepath":"PAGEPATH",
            "title":"引用文本标题",
            "quote_text":"Jack：企业微信真的很好用~\nBalian：超级好的一款软件！"
        },
        "vertical_content_list":[
            {
                "title":"惊喜红包等你来拿",
                "desc":"下载企业微信还能抢红包！"
            }
        ],
        "horizontal_content_list":[
            {
                "keyname":"邀请人",
                "value":"张三"
            },
            {
                "keyname":"企微官网",
                "value":"点击访问",
                "type":1,
                "url":"https://work.weixin.qq.com/?from=openApi"
            },
            {
                "keyname":"企微下载",
                "value":"企业微信.apk",
                "type":2,
                "media_id":"MEDIAID"
            }
        ],
        "jump_list":[
            {
                "type":1,
                "url":"https://work.weixin.qq.com/?from=openApi",
                "title":"企业微信官网"
            },
            {
                "type":2,
                "appid":"APPID",
                "pagepath":"PAGEPATH",
                "title":"跳转小程序"
            }
        ],
        "card_action":{
            "type":1,
            "url":"https://work.weixin.qq.com/?from=openApi",
            "appid":"APPID",
            "pagepath":"PAGEPATH"
        }
    }
}
```

请求参数

| 参数 | 类型 | 必须 | 说明 |
| :-- | :-- | :-- | :-- |
| msgtype | String | 是 | 模版卡片的消息类型为`template_card` |
| template\_card | Object | 是 | 具体的模版卡片参数 |

template\_card的参数说明

| 参数 | 类型 | 必须 | 说明 |
| :-- | :-- | :-- | :-- |
| card\_type | String | 是 | 模版卡片的模版类型，图文展示模版卡片的类型为`news_notice` |
| source | Object | 否 | 卡片来源样式信息，不需要来源样式可不填写 |
| source.icon\_url | String | 否 | 来源图片的url |
| source.desc | String | 否 | 来源图片的描述，建议不超过13个字 |
| source.desc\_color | Int | 否 | 来源文字的颜色，目前支持：0(默认) 灰色，1 黑色，2 红色，3 绿色 |
| main\_title | Object | 是 | 模版卡片的主要内容，包括一级标题和标题辅助信息 |
| main\_title.title | String | 是 | 一级标题，建议不超过26个字 |
| main\_title.desc | String | 否 | 标题辅助信息，建议不超过30个字 |
| card\_image | Object | 是 | 图片样式 |
| card\_image.url | String | 是 | 图片的url |
| card\_image.aspect\_ratio | Float | 否 | 图片的宽高比，宽高比要小于2.25，大于1.3，不填该参数默认1.3 |
| image\_text\_area | Object | 否 | 左图右文样式 |
| image\_text\_area.type | Int | 否 | 左图右文样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序 |
| image\_text\_area.url | String | 否 | 点击跳转的url，image\_text\_area.type是1时必填 |
| image\_text\_area.appid | String | 否 | 点击跳转的小程序的appid，必须是与当前应用关联的小程序，image\_text\_area.type是2时必填 |
| image\_text\_area.pagepath | String | 否 | 点击跳转的小程序的pagepath，image\_text\_area.type是2时选填 |
| image\_text\_area.title | String | 否 | 左图右文样式的标题 |
| image\_text\_area.desc | String | 否 | 左图右文样式的描述 |
| image\_text\_area.image\_url | String | 是 | 左图右文样式的图片url |
| quote\_area | Object | 否 | 引用文献样式，建议不与关键数据共用 |
| quote\_area.type | Int | 否 | 引用文献样式区域点击事件，0或不填代表没有点击事件，1 代表跳转url，2 代表跳转小程序 |
| quote\_area.url | String | 否 | 点击跳转的url，quote\_area.type是1时必填 |
| quote\_area.appid | String | 否 | 点击跳转的小程序的appid，quote\_area.type是2时必填 |
| quote\_area.pagepath | String | 否 | 点击跳转的小程序的pagepath，quote\_area.type是2时选填 |
| quote\_area.title | String | 否 | 引用文献样式的标题 |
| quote\_area.quote\_text | String | 否 | 引用文献样式的引用文案 |
| vertical\_content\_list | Object\[\] | 否 | 卡片二级垂直内容，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过4 |
| vertical\_content\_list.title | String | 是 | 卡片二级标题，建议不超过26个字 |
| vertical\_content\_list.desc | String | 否 | 二级普通文本，建议不超过112个字 |
| horizontal\_content\_list | Object\[\] | 否 | 二级标题+文本列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过6 |
| horizontal\_content\_list.type | Int | 否 | 模版卡片的二级标题信息内容支持的类型，1是url，2是文件附件，3 代表点击跳转成员详情 |
| horizontal\_content\_list.keyname | String | 是 | 二级标题，建议不超过5个字 |
| horizontal\_content\_list.value | String | 否 | 二级文本，如果horizontal\_content\_list.type是2，该字段代表文件名称（要包含文件类型），建议不超过26个字 |
| horizontal\_content\_list.url | String | 否 | 链接跳转的url，horizontal\_content\_list.type是1时必填 |
| horizontal\_content\_list.media\_id | String | 否 | 附件的[media\_id](https://developer.work.weixin.qq.com/document/path/99110#14404/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)，horizontal\_content\_list.type是2时必填 |
| horizontal\_content\_list.userid | String | 否 | 成员详情的userid，horizontal\_content\_list.type是3时必填 |
| jump\_list | Object\[\] | 否 | 跳转指引样式的列表，该字段可为空数组，但有数据的话需确认对应字段是否必填，列表长度不超过3 |
| jump\_list.type | Int | 否 | 跳转链接类型，0或不填代表不是链接，1 代表跳转url，2 代表跳转小程序 |
| jump\_list.title | String | 是 | 跳转链接样式的文案内容，建议不超过13个字 |
| jump\_list.url | String | 否 | 跳转链接的url，jump\_list.type是1时必填 |
| jump\_list.appid | String | 否 | 跳转链接的小程序的appid，jump\_list.type是2时必填 |
| jump\_list.pagepath | String | 否 | 跳转链接的小程序的pagepath，jump\_list.type是2时选填 |
| card\_action | Object | 是 | 整体卡片的点击跳转事件，news\_notice模版卡片中该字段为必填项 |
| card\_action.type | Int | 是 | 卡片跳转类型，1 代表跳转url，2 代表打开小程序。news\_notice模版卡片中该字段取值范围为\[1,2\] |
| card\_action.url | String | 否 | 跳转事件的url，card\_action.type是1时必填 |
| card\_action.appid | String | 否 | 跳转事件的小程序的appid，card\_action.type是2时必填 |
| card\_action.pagepath | String | 否 | 跳转事件的小程序的pagepath，card\_action.type是2时选填 |

## [](https://developer.work.weixin.qq.com/document/path/99110#%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6)消息发送频率限制

每个消息推送发送的消息不能超过20条/分钟。

## [](https://developer.work.weixin.qq.com/document/path/99110#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)文件上传接口

> 素材上传得到media\_id，该media\_id仅三天内有效  
> media\_id只能是对应上传文件的消息推送可以使用

**请求方式：**POST（**HTTPS**）  
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/webhook/upload\_media?key=KEY&type=TYPE

使用multipart/form-data POST上传文件或语音， 文件标识名为"media"  
**参数说明：**

| 参数 | 必须 | 说明 |
| --- | --- | --- |
| key | 是 | 调用接口凭证, 消息推送webhookurl中的key参数 |
| type | 是 | 文件类型，分别有语音(voice)和普通文件(file) |

POST的请求包中，form-data中媒体文件标识，应包含有 **filename**、filelength、content-type等信息

> filename标识文件展示的名称。比如，使用该media\_id发消息时，展示的文件名由该字段控制

**请求示例：**

```javascript
POST https://qyapi.weixin.qq.com/cgi-bin/webhook/upload_media?key=693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa&type=file HTTP/1.1
Content-Type: multipart/form-data; boundary=-------------------------acebdf13572468
Content-Length: 220

---------------------------acebdf13572468
Content-Disposition: form-data; name="media";filename="wework.txt"; filelength=6
Content-Type: application/octet-stream

mytext
---------------------------acebdf13572468--
```

**返回数据：**

```javascript
{
   "errcode": 0,
   "errmsg": "ok",
   "type": "file",
   "media_id": "1G6nrLmr5EC3MMb_-zK1dDdzmd0p7cNliYu9V5w7o8K0",
   "created_at": "1380000000"
}
```

**参数说明：**

| 参数 | 说明 |
| --- | --- |
| type | 文件类型，分别有语音(voice)和普通文件(file) |
| media\_id | 媒体文件上传后获取的唯一标识，3天内有效 |
| created\_at | 媒体文件上传时间戳 |

**上传的文件限制：**  
所有类型的文件大小均要求大于5个字节

- 普通文件(file)：文件大小不超过20M
- 语音(voice)：文件大小不超过2M，播放长度不超过60s，**仅支持**AMR格式