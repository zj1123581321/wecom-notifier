我最近写了很多个 Python 项目，它们都需要使用企业微信的机器人来进行通知。然后我需要给企业微信的机器人增加很多功能，比如说频率控制、长上下文的分段。每次都重复这代码我觉得很麻烦。
所以我打算将企业微信通知功能单独抽象出来，最好能实现：只要更新这个项目，其他依赖它的项目，其通知功能也能同步更新。不知道有没有什么方案?

# 功能需求

## 支持格式
- text
- markdown_v2
- image

其中后两者需要引入 “@all” 功能，也就是外部调用本项目的时候，如果指定了艾特所有人，那么即使他想要使用的方式是原生不支持艾特所有人的 Markdown v2，还有 image 方法，该项目也要帮他实现。具体而言，就是在这条消息的最后，使用 text 发送一个 “@all” 的通知

## 每个消息推送发送的消息不能超过20条/分钟。

企业微信的限制是，对于每个 Webhook 地址，每分钟发送的消息数不能超过20条。这个功能需要实现.

## 长文本自动分段

项目需要支持的两种文本发送格式，它们对于每次发送的文本长度有限制，限制为4096个字节。所以，我需要这个项目能发送任意长度的文本，那么就需要增加自动分段的功能。
对于 text 格式的文本，分段相对来说比较简单，但对于 markdown v2 格式的文本，分段时需要注意 Markdown 语法不能将一些有明显意义的内容，例如链接和图片，拆分成两个不同的段落。
同时分段发送还需要保证一定的时间间隔，以确保顺序不乱，这个默认间隔设置为1000毫秒。


## 便携在其他项目里使用
因为这个项目是要作为通知组件服务于其他项目，所以我希望在其他项目中能够很方便地引用这个项目，以获取最新的功能。